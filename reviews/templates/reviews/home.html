{% extends "reviews/base.html" %}
{% block title %}Fragrance Club — Reviews{% endblock %}

{% block content %}
  {% if reviews %}
    <ul>
      {% for review in reviews %}
        <li style="margin-bottom:1rem;">
          <strong>{{ review.brand }} – {{ review.fragrance_name }}</strong>
          ({{ review.rating }}/5)<br>
          <small>Posted {{ review.created|date:"j M Y, H:i" }}</small><br>
          {{ review.body|truncatewords:20 }}<br>
          <a href="{% url 'reviews:detail' review.id %}">Read more</a>

          {# optional YouTube preview on the list page #}
          {% with review.youtube_embed_src_auto as yt %}
            {% if yt %}
              <details style="margin:.5rem 0;">
                <summary>Watch review</summary>
                <div style="margin:.5rem 0;">
                  <iframe
                    width="560" height="315"
                    src="{{ yt }}"
                    title="YouTube video"
                    frameborder="0" loading="lazy"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    referrerpolicy="strict-origin-when-cross-origin"
                    allowfullscreen
                    style="max-width:100%;border-radius:8px;">
                  </iframe>
                </div>
              </details>
            {% endif %}
          {% endwith %}
        </li>
        <hr>
      {% endfor %}
    </ul>
  {% else %}
    <p>No reviews yet. Add one in the admin.</p>
  {% endif %}
{% endblock %}
