{% extends "reviews/base.html" %}
{% block title %}{{ review.brand }} — {{ review.fragrance_name }}{% endblock %}

{% block content %}
  <!-- 
    Back navigation: always show this link to let users return 
    to the full list of reviews.
  -->
  <p><a href="{% url 'reviews:home' %}">← Back to reviews</a></p>

  <!-- 
    Review content area: display all details for one review.
    Uses simple semantic HTML and safe Django template filters.
  -->
  <h1>{{ review.brand }} — {{ review.fragrance_name }}</h1>
  <p><strong>Rating:</strong> {{ review.rating }}/5</p>
  <p>{{ review.body|linebreaksbr }}</p>
  <p><small>Added: {{ review.created }}</small></p>

  <!-- 
    Author-only controls:
    Show Edit and Delete buttons only to the user who created the review.
    - Keeps ownership logic visible.
    - Edit is a regular link (styled like a button).
    - Delete remains disabled until implemented next.
  -->
  {% if user.is_authenticated and review.author_id == user.id %}
    <p style="margin-top:1rem; display:flex; gap:.5rem;">
      <!-- Edit link -->
      <a href="{% url 'reviews:edit' review.id %}"
         style="display:inline-block;padding:0.5rem 0.85rem;border:1px solid #222;border-radius:8px;text-decoration:none;">
        Edit
      </a>

      <!-- Delete form (POST) -->
      <form method="post"
            action="{% url 'reviews:delete' review.id %}"
            onsubmit="return confirm('Delete this review? This cannot be undone.');"
            style="display:inline;">
        {% csrf_token %}
        <button type="submit">Delete</button>
      </form>
    </p>
  {% endif %}
{% endblock %}
